import time
from appium import webdriver
from selenium.webdriver.common.by import By

# BrowserStack credentials
userName = "fasa_hAS0f8"
accessKey = "jb9xTf3Hz6RpveKFpqqz"

# Device configuration
desired_caps = {
    "deviceName": "Samsung Galaxy S22 Ultra",
    "osVersion": "12.0",
    "platformName": "android",
    "app": "./Check_IP.apk",
    "projectName": "BrowserStack Samples",
    "buildName": "browserstack build",
    "buildIdentifier": "#1",
    "browserstackLocal": True,
    "forceLocal": True
}

# Initialize the driver
driver = webdriver.Remote(
    command_executor=f"https://{userName}:{accessKey}@hub-cloud.browserstack.com/wd/hub",
    desired_capabilities=desired_caps
)

# Run for 60 seconds
start_time = time.time()
try:
    while time.time() - start_time < 60:
        # Do something simple like checking if an element exists
        try:
            elements = driver.find_elements(By.XPATH, "//*")
            print(f"Found {len(elements)} elements")
        except:
            pass
        time.sleep(5)  # Wait 5 seconds between checks
finally:
    # Always quit the driver
    driver.quit()
